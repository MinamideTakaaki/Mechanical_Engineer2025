<!DOCTYPE html>
<html>
<body>
  <button id="scan">Scan BLE</button>
  <pre id="log"></pre>

  <script>
    const logEl = document.querySelector("#log");
    const log = (m) => { logEl.textContent += m + "\n"; console.log(m); };

    document.querySelector("#scan").onclick = async () => {
      try {
        const scan = await navigator.bluetooth.requestLEScan({
          acceptAllAdvertisements: true,
          keepRepeatedDevices: true
        });

        log("Scanning...");

        navigator.bluetooth.addEventListener("advertisementreceived", e => {
          log("---");
          log(`Name: ${e.device.name}`);
          log(`ID: ${e.device.id}`);
          log(`RSSI: ${e.rssi}`);
          log(`UUIDs: ${e.uuids}`);
        });

      } catch (err) {
        log("ERROR: " + err);
      }
    };
  </script>
</body>
</html>
